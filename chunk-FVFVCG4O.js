import{a as oe,b as g,c as re,d as ae}from"./chunk-C5WND45I.js";import{$ as p,A as F,B as c,C as k,Ca as q,Da as Y,F as b,Ga as J,Ha as K,J as r,Ja as X,K as _,P as x,R as h,T as B,Tb as ie,U as H,W as N,X as P,Xb as ne,Y as O,Z as i,_ as o,a as j,aa as G,b as A,ba as W,ca as S,fb as T,ga as R,ha as Z,hb as ee,ia as z,ja as Q,ka as s,la as d,ma as y,mb as w,pb as te,q as I,r as v,t as C,u as E,v as V,va as U,w as M,wa as $,ya as m,z as D,za as u}from"./chunk-HSDGEO3H.js";var se=(()=>{class t{constructor(e){this._HttpClient=e}getDevicesLocstions(){return this._HttpClient.get(te.app_api_url+"DeviceSummariesUnified/get-all-locations")}static{this.\u0275fac=function(n){return new(n||t)(C(X))}}static{this.\u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var ue=(t,l)=>({lat:t,lng:l}),ke=(t,l,e)=>({"text-success_color":t,"text-warning_color":l,"text-danger_color":e});function he(t,l){if(t&1){let e=G();i(0,"map-advanced-marker",6,1),W("mapClick",function(){let a=D(e).$implicit,f=Q(1),ce=S();return F(ce.openInfoWindow(f,a))}),o()}if(t&2){let e=l.$implicit;h("position",U(3,ue,e==null?null:e.latitude,e==null?null:e.longitude))("title",e==null?null:e.deviceName)("content",e.content)}}function fe(t,l){t&1&&(i(0,"div",27),c(),i(1,"svg",29),p(2,"path",30)(3,"path",31)(4,"path",32)(5,"path",33),o()())}function ve(t,l){t&1&&(i(0,"div",34),c(),i(1,"svg",29),p(2,"path",35)(3,"path",36)(4,"path",37)(5,"path",38),o()())}function Ce(t,l){t&1&&(i(0,"div",39),c(),i(1,"svg",29),p(2,"path",40)(3,"path",41)(4,"path",42)(5,"path",43),o()())}function Me(t,l){if(t&1&&(i(0,"div",7)(1,"div",8)(2,"div"),c(),i(3,"svg",9),p(4,"path",10)(5,"path",11)(6,"path",12)(7,"path",13)(8,"path",14)(9,"path",15)(10,"path",16)(11,"path",17),o()(),k(),i(12,"div")(13,"h5",18),s(14),m(15,"translate"),o(),i(16,"p",19),s(17),o()()(),i(18,"div",8)(19,"div"),c(),i(20,"svg",9),p(21,"path",20)(22,"path",21),o()(),k(),i(23,"div")(24,"h5",18),s(25),m(26,"translate"),o(),i(27,"p",19),s(28),o()()(),i(29,"div",8)(30,"div"),c(),i(31,"svg",9),p(32,"path",22)(33,"path",23),o()(),k(),i(34,"div")(35,"h5",18),s(36),m(37,"translate"),o(),i(38,"p",19),s(39),o()()(),i(40,"div",8)(41,"div"),c(),i(42,"svg",9),p(43,"path",24)(44,"path",25)(45,"path",26),o()(),k(),i(46,"div")(47,"h5",18),s(48),m(49,"translate"),o(),i(50,"p"),s(51),m(52,"translate"),m(53,"translate"),o()()(),i(54,"div",8),x(55,fe,6,0,"div",27)(56,ve,6,0)(57,Ce,6,0),i(58,"div")(59,"h5",18),s(60),m(61,"translate"),o(),i(62,"p",28),s(63),o()()()()),t&2){let e=S();r(14),d(u(15,14,"MAP.BEACON_ID")),r(3),d(e.selectedLocation==null?null:e.selectedLocation.beaconId),r(8),d(u(26,16,"MAP.LOCATION")),r(3),d(e.selectedLocation==null?null:e.selectedLocation.location),r(8),d(u(37,18,"MAP.LAST_UPDATE")),r(3),d(e.selectedLocation==null?null:e.selectedLocation.lastActive),r(9),d(u(49,20,"MAP.STATUS")),r(2),B(e.selectedLocation!=null&&e.selectedLocation.isOnline?"text-success_color":"text-danger_color"),r(),y(" ",e.selectedLocation!=null&&e.selectedLocation.isOnline?u(52,22,"MAP.ONLINE"):u(53,24,"MAP.OFFLINE"),""),r(4),H(55,(e.selectedLocation==null?null:e.selectedLocation.battery)>=50?55:(e.selectedLocation==null?null:e.selectedLocation.battery)<50&&(e.selectedLocation==null?null:e.selectedLocation.battery)>=20?56:57),r(5),d(u(61,26,"MAP.BATTERY_STATUS")),r(2),h("ngClass",$(28,ke,(e.selectedLocation==null?null:e.selectedLocation.battery)>=50,(e.selectedLocation==null?null:e.selectedLocation.battery)<50&&(e.selectedLocation==null?null:e.selectedLocation.battery)>=20,(e.selectedLocation==null?null:e.selectedLocation.battery)<20)),r(),y(" ",(e.selectedLocation==null?null:e.selectedLocation.battery)+"%","")}}var le=(()=>{class t{ngOnInit(){this.getMapData()}constructor(e,n){this._SharedService=e,this._MapsService=n,this.locations=[],this.center={lat:24.713892459748248,lng:46.66132500714057},this.zoom=8,this.options={mapId:"115e41338d1465ab",center:this.center,zoom:this.zoom,styles:[{featureType:"administrative",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{visibility:"off"}]}]},this.location={lat:40.73061,lng:-73.935242,name:"test"};let a=E(b);K(a)&&this.setData(),this._SharedService.breadCrumbTitle.next("SIDEBAR.MAP")}getMapData(){this._MapsService.getDevicesLocstions().subscribe({next:e=>{this.locations=e?.data,this.locations=this.locations.map(n=>{let a=document.createElement("img");return a.src=n?.isOnline?"assets/images/map_icon.svg":"assets/images/offline_map_icon.svg",a.style.width="40px",a.style.height="40px",A(j({},n),{content:a})}),console.log("map data",this.locations)}})}setData(){let e=document.createElement("img");e.src="assets/images/map_icon.svg",e.style.width="40px",e.style.height="40px",this.location.content=e}openInfoWindow(e,n){this.selectedLocation=n,this.infoWindow.open(e)}onMapInitialized(e){this.map=e,this.map.setOptions(this.options),console.log("Map initialized with options:",this.options),console.log("Map styles applied:",this.map.get("styles"))}static{this.\u0275fac=function(n){return new(n||t)(_(w),_(se))}}static{this.\u0275cmp=V({type:t,selectors:[["app-tracker"]],viewQuery:function(n,a){if(n&1&&R(g,5),n&2){let f;Z(f=z())&&(a.infoWindow=f.first)}},decls:7,vars:2,consts:[["infoWindow","mapInfoWindow"],["markerElem","mapAdvancedMarker"],[1,"map_container","min-h-dvh"],["height","100%","width","100%",2,"position","absolute","top","0px","bottom","0","left","0","right","0",3,"options"],[3,"position","title","content"],["class","info_window p-4 w-60",4,"ngIf"],[3,"mapClick","position","title","content"],[1,"info_window","p-4","w-60"],[1,"flex","items-center","gap-6","mb-6"],["width","30","height","30","viewBox","0 0 30 30","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M21.25 25.625H8.75C5 25.625 2.5 23.75 2.5 19.375V10.625C2.5 6.25 5 4.375 8.75 4.375H21.25C25 4.375 27.5 6.25 27.5 10.625V19.375C27.5 23.75 25 25.625 21.25 25.625Z","stroke","#1A232D","stroke-width","1.5","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M7.5 10V20","stroke","#1A232D","stroke-width","1.5","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M11.25 10V15","stroke","#1A232D","stroke-width","1.5","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M11.25 18.75V20","stroke","#1A232D","stroke-width","1.5","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M18.75 10V11.25","stroke","#1A232D","stroke-width","1.5","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M15 10V20","stroke","#1A232D","stroke-width","1.5","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M18.75 15V20","stroke","#1A232D","stroke-width","1.5","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M22.5 10V20","stroke","#1A232D","stroke-width","1.5","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],[1,"text-xl","font-medium"],[1,"text-gold_color"],["d","M4.52512 10.6125C6.98762 -0.212497 23.0251 -0.199996 25.4751 10.625C26.9126 16.975 22.9626 22.35 19.5001 25.675C16.9876 28.1 13.0126 28.1 10.4876 25.675C7.03762 22.35 3.08762 16.9625 4.52512 10.6125Z","stroke","#1A232D","stroke-width","1.5"],["d","M14.9996 16.7874C17.1535 16.7874 18.8996 15.0414 18.8996 12.8874C18.8996 10.7335 17.1535 8.98742 14.9996 8.98742C12.8457 8.98742 11.0996 10.7335 11.0996 12.8874C11.0996 15.0414 12.8457 16.7874 14.9996 16.7874Z","stroke","#1A232D","stroke-width","1.5"],["d","M27.5 15C27.5 21.9 21.9 27.5 15 27.5C8.1 27.5 2.5 21.9 2.5 15C2.5 8.1 8.1 2.5 15 2.5C21.9 2.5 27.5 8.1 27.5 15Z","stroke","#1A232D","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M19.6371 18.975L15.7621 16.6625C15.0871 16.2625 14.5371 15.3 14.5371 14.5125V9.38751","stroke","#1A232D","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M3.0625 18.7125C4.4 23.0125 8.00001 26.325 12.475 27.2375","stroke","#1A232D","stroke-width","2","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M2.5625 13.725C3.2 7.4125 8.52499 2.5 15 2.5C21.475 2.5 26.8 7.425 27.4375 13.725","stroke","#1A232D","stroke-width","2","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M17.5127 27.25C21.9752 26.3375 25.5627 23.0625 26.9252 18.775","stroke","#1A232D","stroke-width","2","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],[1,"flex","justify-center","items-center","text-success_color"],[3,"ngClass"],["width","20","height","20","viewBox","0 0 20 20","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M17.0833 7.91667C18.3333 7.91667 18.3333 8.33333 18.3333 9.16667V10.8333C18.3333 11.6667 18.3333 12.0833 17.0833 12.0833","stroke","#14AB46","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M5.31665 8.33333C5.59165 9.425 5.59165 10.575 5.31665 11.6667","stroke","#14AB46","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M8.2334 8.33333C8.5084 9.425 8.5084 10.575 8.2334 11.6667","stroke","#14AB46","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M10.8334 15.8333H5.83341C2.50008 15.8333 1.66675 15 1.66675 11.6667V8.33333C1.66675 5 2.50008 4.16667 5.83341 4.16667H10.8334C14.1667 4.16667 15.0001 5 15.0001 8.33333V11.6667C15.0001 15 14.1667 15.8333 10.8334 15.8333Z","stroke","#14AB46","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"flex","justify-center","items-center","text-warning_color"],["d","M17.0833 7.91666C18.3333 7.91666 18.3333 8.33333 18.3333 9.16666V10.8333C18.3333 11.6667 18.3333 12.0833 17.0833 12.0833","stroke","#FF9500","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M5.31665 8.33334C5.59165 9.425 5.59165 10.575 5.31665 11.6667","stroke","#FF9500","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M8.2334 8.33334C8.5084 9.425 8.5084 10.575 8.2334 11.6667","stroke","#FF9500","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M10.8334 15.8333H5.83341C2.50008 15.8333 1.66675 15 1.66675 11.6667V8.33333C1.66675 5 2.50008 4.16666 5.83341 4.16666H10.8334C14.1667 4.16666 15.0001 5 15.0001 8.33333V11.6667C15.0001 15 14.1667 15.8333 10.8334 15.8333Z","stroke","#FF9500","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"flex","justify-center","text-danger_color"],["d","M17.0833 7.91667C18.3333 7.91667 18.3333 8.33334 18.3333 9.16667V10.8333C18.3333 11.6667 18.3333 12.0833 17.0833 12.0833","stroke","#FF0004","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M5.31665 8.33333C5.59165 9.42499 5.59165 10.575 5.31665 11.6667","stroke","#FF0004","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M8.23334 8.33333C8.50834 9.42499 8.50834 10.575 8.23334 11.6667","stroke","#FF0004","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M10.8334 15.8333H5.83335C2.50002 15.8333 1.66669 15 1.66669 11.6667V8.33334C1.66669 5.00001 2.50002 4.16667 5.83335 4.16667H10.8334C14.1667 4.16667 15 5.00001 15 8.33334V11.6667C15 15 14.1667 15.8333 10.8334 15.8333Z","stroke","#FF0004","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"]],template:function(n,a){n&1&&(i(0,"div",2)(1,"google-map",3),P(2,he,2,6,"map-advanced-marker",4,N),i(4,"map-info-window",null,0),x(6,Me,64,32,"div",5),o()()()),n&2&&(r(),h("options",a.options),r(),O(a.locations),r(4),h("ngIf",a.selectedLocation))},dependencies:[q,Y,oe,g,re,ee]})}}return t})();var we=[{path:"",redirectTo:"tracker",pathMatch:"full"},{path:"tracker",component:le}],de=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=M({type:t})}static{this.\u0275inj=v({imports:[T.forChild(we),T]})}}return t})();var Re=(()=>{class t{constructor(e){this._SharedService=e,this._SharedService.breadCrumbTitle.next("Map")}static{this.\u0275fac=function(n){return new(n||t)(C(w))}}static{this.\u0275mod=M({type:t})}static{this.\u0275inj=v({imports:[J,de,ne,ie,ae]})}}return t})();export{Re as MapModule};
